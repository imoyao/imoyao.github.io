<!DOCTYPE html>
<html lang=zh>
<head><meta name="generator" content="Hexo 3.8.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="本文基于DRBD-8.4版编写。">
<meta name="keywords" content="DRBD">
<meta property="og:type" content="article">
<meta property="og:title" content="DRBD用户手册之命令篇">
<meta property="og:url" content="https://imoyao.github.io/blog/2018-06-22/commonds-of-drbd/index.html">
<meta property="og:site_name" content="别院牧志">
<meta property="og:description" content="本文基于DRBD-8.4版编写。">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-06-07T10:10:11.276Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="DRBD用户手册之命令篇">
<meta name="twitter:description" content="本文基于DRBD-8.4版编写。">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>DRBD用户手册之命令篇</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/categories/">分类</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </span>
    <br>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/blog/2018-08-28/drbd-with-external-disk/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/blog/2018-05-27/Split-Brain-Of-DRBD/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
      <span id="i-share" class="info" style="display:none;">分享文章</span>
    </span>
    <br>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://imoyao.github.io/blog/2018-06-22/commonds-of-drbd/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://imoyao.github.io/blog/2018-06-22/commonds-of-drbd/&text=DRBD用户手册之命令篇"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://imoyao.github.io/blog/2018-06-22/commonds-of-drbd/&title=DRBD用户手册之命令篇"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://imoyao.github.io/blog/2018-06-22/commonds-of-drbd/&is_video=false&description=DRBD用户手册之命令篇"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=DRBD用户手册之命令篇&body=Check out this article: https://imoyao.github.io/blog/2018-06-22/commonds-of-drbd/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://imoyao.github.io/blog/2018-06-22/commonds-of-drbd/&title=DRBD用户手册之命令篇"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://imoyao.github.io/blog/2018-06-22/commonds-of-drbd/&title=DRBD用户手册之命令篇"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://imoyao.github.io/blog/2018-06-22/commonds-of-drbd/&title=DRBD用户手册之命令篇"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://imoyao.github.io/blog/2018-06-22/commonds-of-drbd/&title=DRBD用户手册之命令篇"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://imoyao.github.io/blog/2018-06-22/commonds-of-drbd/&name=DRBD用户手册之命令篇&description=&lt;p&gt;本文基于&lt;code&gt;DRBD-8.4&lt;/code&gt;版编写。&lt;br&gt;"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#drbd-conf-配置文件"><span class="toc-number">1.</span> <span class="toc-text">drbd.conf-配置文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#drbdmeata-元数据"><span class="toc-number">2.</span> <span class="toc-text">drbdmeata-元数据</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#drbd"><span class="toc-number">3.</span> <span class="toc-text">drbd</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#drbdadm-管理工具"><span class="toc-number">4.</span> <span class="toc-text">drbdadm-管理工具</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#名称"><span class="toc-number">4.1.</span> <span class="toc-text">名称</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#概要"><span class="toc-number">4.2.</span> <span class="toc-text">概要</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#描述"><span class="toc-number">4.3.</span> <span class="toc-text">描述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#选项"><span class="toc-number">4.4.</span> <span class="toc-text">选项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#命令"><span class="toc-number">4.5.</span> <span class="toc-text">命令</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#drbddisk-8"><span class="toc-number">5.</span> <span class="toc-text">drbddisk.8</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#drbdsetup-8-配置内核模块"><span class="toc-number">6.</span> <span class="toc-text">drbdsetup.8-配置内核模块</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#版本信息"><span class="toc-number">7.</span> <span class="toc-text">版本信息</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#作者"><span class="toc-number">8.</span> <span class="toc-text">作者</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#报告错误"><span class="toc-number">9.</span> <span class="toc-text">报告错误</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#版权"><span class="toc-number">10.</span> <span class="toc-text">版权</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#推荐阅读"><span class="toc-number">11.</span> <span class="toc-text">推荐阅读</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#参考链接"><span class="toc-number">12.</span> <span class="toc-text">参考链接</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        DRBD用户手册之命令篇
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">imoyao</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2018-06-22T02:10:23.000Z" itemprop="datePublished">2018-06-22</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/DRBD/">DRBD</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <script src="/assets/js/APlayer.min.js"> </script><p>本文基于<code>DRBD-8.4</code>版编写。<br><a id="more"></a></p>
<h1 id="drbd-conf-配置文件"><a href="#drbd-conf-配置文件" class="headerlink" title="drbd.conf-配置文件"></a>drbd.conf-配置文件</h1><p>TODO</p>
<h1 id="drbdmeata-元数据"><a href="#drbdmeata-元数据" class="headerlink" title="drbdmeata-元数据"></a>drbdmeata-元数据</h1><p>TODO</p>
<h1 id="drbd"><a href="#drbd" class="headerlink" title="drbd"></a>drbd</h1><p>TODO</p>
<h1 id="drbdadm-管理工具"><a href="#drbdadm-管理工具" class="headerlink" title="drbdadm-管理工具"></a>drbdadm-管理工具</h1><h2 id="名称"><a href="#名称" class="headerlink" title="名称"></a>名称</h2><p>drbdadm - <code>DRBD</code>管理工具</p>
<h2 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">drbdadm [-d] [-c &#123; file&#125;] [-t &#123;file&#125;] [-s &#123;cmd&#125;] [-m &#123; cmd&#125;] [-S] [-h &#123;host&#125;] [-- &#123; backend-options&#125;] &#123;command&#125; [&#123;all&#125; | &#123; resource[/volume&gt;]...&#125;]</span><br></pre></td></tr></table></figure>
<h2 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h2><p><code>Drbdadm</code>是<code>DRBD</code>程序套件的高级工具。 <code>Drbdadm</code>与<code>drbdsetup</code>和<code>drbdmeta</code>的关系可类比于 <code>ifup / ifdown</code>与<code>ifconfig</code> 。 <code>Drbdadm</code>通过调用<code>drbdsetup</code>和（或）<code>drbdmeta</code>程序读取相关配置文件并执行指定的命令。<br><code>Drbdadm</code>可以运行整个资源或资源中的单个卷。 子命令： <code>attach</code> ， <code>detach</code> ， <code>primary</code> ， <code>secondary</code>， <code>invalidate</code> ， <code>invalidate-remote</code> ， <code>outdate</code> ， <code>resize</code> ， <code>verify</code> ， <code>pause-sync</code> ， <code>resume-sync</code> ， <code>role</code> ， <code>cstate</code> ， <code>dstate</code> ， <code>create-md</code> ， <code>show-gi</code> ， <code>get-gi</code> ， <code>dump-md</code> ， <code>wipe-md</code>可以作用于整个资源和单个卷上。<br>仅限资源级别的命令有：<code>connect</code>, <code>disconnect</code>, <code>up</code>, <code>down</code>, <code>wait-connect</code> 和 <code>dump</code> 。</p>
<h2 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h2><ul>
<li>-d ，– dry-run</li>
</ul>
<p>仅将<code>drbdsetup</code>的调用打印到<code>stdout</code>，但不会运行这些命令。</p>
<ul>
<li>-c ，– config-file 文件</li>
</ul>
<p>指定<code>drbdadm</code>将使用的配置文件。 如果未指定此参数，则<code>drbdadm</code>将查找<code>/etc/drbd-84.conf</code>、<code>/etc/drbd-83.conf</code>、<code>/etc/drbd-08.conf</code>和<code>/etc/drbd.conf</code> 。</p>
<ul>
<li>-t ，– config-to-test 文件</li>
</ul>
<p>指定一个额外的<code>drbdadm</code>检查文件。 该选项仅适用于<code>dump</code>和<code>sh-nop</code>命令。</p>
<ul>
<li>-s ，– drbdsetup 文件</li>
</ul>
<p>指定<code>drbdsetup</code>程序的完整路径。 如果省略此选项，<code>drbdadm</code>将首先内部查找它，然后在<code>PATH</code>环境变量中查找它。</p>
<ul>
<li>-m ，– drbdmeta 文件</li>
</ul>
<p>指定<code>drbdmeta</code>程序的完整路径。 如果省略此选项，<code>drbdadm</code>将首先内部查找它，然后在<code>PATH</code>中查找它。</p>
<ul>
<li>-S ， –stacked</li>
</ul>
<p>指定应该在堆叠资源上执行此命令。</p>
<ul>
<li>-P ， –peer</li>
</ul>
<p>指定要连接的对等节点。 只有当您正在使用的资源中有两个以上的主机时才需要此选项。</p>
<ul>
<li>后端配置选项</li>
</ul>
<p>双连字符（–）后面的所有选项都被视为后端选项。这些选项会传递给后端命令。 即<code>drbdsetup</code>、<code>drbdmeta</code>或<code>drbd-proxy-ctl</code> 。</p>
<h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><ul>
<li>attach</li>
</ul>
<p>将本地支持块设备连接到DRBD资源的设备。</p>
<ul>
<li>detach</li>
</ul>
<p>从DRBD资源的设备中删除备份存储设备。</p>
<ul>
<li>connect</li>
</ul>
<p>建立资源设备的网络配置。 如果对等设备已配置，则两个<code>DRBD</code>设备将连接。 如果资源中有两个以上的主机部分，则需要使用<code>--peer</code>选项来选择要连接的对等端。</p>
<ul>
<li>disconnect</li>
</ul>
<p>从资源中删除网络配置。 设备将进入<code>StandAlone</code>状态。</p>
<ul>
<li>syncer（注：<code>drbdadm --help</code> 未发现该命令）</li>
</ul>
<p>将重新同步参数加载到设备中。</p>
<ul>
<li>up</li>
</ul>
<p>是<code>attach</code>、<code>syncer</code>和 <code>connect</code>的快捷方式。</p>
<p>实际上，可以将<code>drbdadm up</code>拆分为以下几个动作：</p>
<ol>
<li><p>将drbd的资源关联到底层设备(metadata和data区)上，使之能通过底层设备存、取数据。该过程调用的是drbdsetup程序。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">drbdadm attach drbd1</span><br></pre></td></tr></table></figure>
</li>
<li><p>加载drbd资源的同步参数。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">drbdadm syncer drbd1</span><br></pre></td></tr></table></figure>
</li>
<li><p>连接对端。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">drbdadm connect drbd1</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>这些命令在<code>drbdadm</code>中部分已弃用，放在这里只是为了说明<code>up</code>时所执行的几个步骤。</p>
<ul>
<li>down</li>
</ul>
<p>是<code>disconnect</code> 和 <code>detach</code>的捷径。</p>
<ul>
<li>primary</li>
</ul>
<p>将资源设备转化为主要角色。 您需要在访问设备之前执行此操作，如创建或挂载文件系统。</p>
<ul>
<li>secondary</li>
</ul>
<p>将设备转回次要角色。 这是必需的，因为在连接状态的DRBD设备对中，两个节点中只能有一个节点是主端（除非在配置文件中明确设置了<strong>allow-two-primaries</strong> ）。</p>
<ul>
<li>invalidate</li>
</ul>
<p>强制DRBD将本地存储设备上的数据视为不同步（out-of-sync）。 因此，DRBD将复制其对等体中的每个块，以使本地存储设备重新同步。 为避免竞争，你需要建立了的复制链接，或断开连接的次端。</p>
<ul>
<li>invalidate-remote</li>
</ul>
<p>该命令类似于<code>invalidate</code>命令，但是是对等端的备份存储被视为无效，因此对端被本地节点的数据重写。 为避免竞争，您需要已建立的复制链接，或断开连接的主端。</p>
<ul>
<li>resize</li>
</ul>
<p><code>DRBD</code>重新检查所有大小限制，并相应调整资源的设备大小。 例如，如果您增加了备份存储设备的大小（当然是在两个节点上均进行次操作），那么在您的某个节点上调用此命令后，DRBD将采用新的大小。 由于必须同步新的存储空间，因此只有存在至少一个主节点时，此命令才可用。<br><code>--size</code>选项可用于联机缩小<code>drbd</code>设备的可用大小。 用户必须负责确保设备上的文件系统不被该操作截断。<br><code>--assume-peer-have-space</code>允许你调整当前未连接到对等设备的设备。 使用时需要小心，因为如果您不重新调整对等磁盘的大小，则两者的进一步连接尝试将失败。<br><code>--assume-clean</code>允许您调整现有设备的大小并避免同步新的空间。 将附加空白存储添加到设备时，这样操作非常有用。 例：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># drbdadm -- --assume-clean resize r0</span><br></pre></td></tr></table></figure></p>
<p>选项<code>-al-stripes</code>和<code>--al-stripe-size-kB</code>可用于在线更改 <code>activity log</code>的布局。 在使用内部元数据的情况下，这可能会同时缩小用户可见大小（使用<code>--size</code> ）或增加后备设备上的可用空间。</p>
<ul>
<li>check-resize</li>
</ul>
<p>调用<code>drbdmeta</code>达到移动内部元数据的目的。 如果后台设备的大小已调整，而<code>DRBD</code>未运行，则必须将元数据移至设备的末尾，以便接下来的 <code>attach</code> 命令可以成功。</p>
<ul>
<li>create-md</li>
</ul>
<p>初始化元数据存储。 这需要在<code>DRBD</code>资源首次上线之前完成。 如果有关于该命令的问题请看<a href="https://docs.linbit.com/man/v84/drbdmeta-8/" target="_blank" rel="noopener">drbdmeta</a></p>
<ul>
<li>get-gi</li>
</ul>
<p>显示数据生成标识符(<code>GI元祖</code>)的简短文字表示。</p>
<ul>
<li>show-gi</li>
</ul>
<p>打印包含说明信息的数据生成标识符的文本表示。</p>
<ul>
<li>dump-md</li>
</ul>
<p>以文本形式转储元数据存储的全部内容，包括存储的位图和活动日志。</p>
<ul>
<li>outdate</li>
</ul>
<p>设置元数据中的过期标志。</p>
<ul>
<li>adjust</li>
</ul>
<p>将设备的配置与你的配置文件同步。 在实际执行此命令之前，应始终检查<code>dry-run</code>模式的输出。</p>
<ul>
<li>wait-connect</li>
</ul>
<p>等待设备连接到对等设备。</p>
<ul>
<li>role</li>
</ul>
<p>显示设备的当前角色（local/peer）。 例如：<code>Primary/Secondary</code></p>
<ul>
<li>state</li>
</ul>
<p>不赞成使用（废止），“角色”的别名，参见上文。</p>
<ul>
<li>cstate</li>
</ul>
<p>显示设备的当前连接状态。如：Connected、StandAlone等</p>
<ul>
<li>dump</li>
</ul>
<p>解析配置文件并将其转储到<code>stdout</code>。 可用于检查配置文件的语法正确性。</p>
<ul>
<li>outdate</li>
</ul>
<p>用于将节点的数据标记为过时。 通常由对等方的fence-peer处理程序使用。</p>
<ul>
<li>verify</li>
</ul>
<p>开始在线验证。 在线验证期间，比较两个节点上的数据是否相等。 请参阅<code>/proc/drbd</code>进行在线验证。 如果发现不同步块，则它们不会自动重新同步。因此，请在验证完成后使用<code>disconnect</code> 和<code>connect</code>断开并连接资源。<br>另请参阅<code>drbd.conf</code>联机帮助页上有关数据完整性的注意事项。</p>
<ul>
<li>pause-sync</li>
</ul>
<p>通过设置本地暂停标志暂时中止正在进行的重新同步。 如果本地和远程暂停标志均未设置，则同步进行。 可能需要推迟<code>DRBD</code>的重新同步到支持存储的<code>RAID</code>设置重新同步之后进行。</p>
<ul>
<li>resume-sync</li>
</ul>
<p>取消设置本地同步暂停标志。</p>
<ul>
<li>new-current-uuid</li>
</ul>
<p>生成新的<code>当前 UUID</code>并旋转所有其他UUID值。<br>这可以用来缩短集群的初始再同步。 有关更多详细信息，请参阅<code>drbdsetup</code>联机帮助页。</p>
<ul>
<li>dstate</li>
</ul>
<p>以<code>local/peer</code>形式显示后备存储设备的当前状态。 如：UpToDate/UpToDate</p>
<ul>
<li>hidden-commands</li>
</ul>
<p>显示所有命令没有记录的命令。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">[root@imoyao ~]# drbdadm hidden-commands</span><br><span class="line"></span><br><span class="line">These additional commands might be useful for writing   # 写脚本或许有用</span><br><span class="line">nifty shell scripts around drbdadm:</span><br><span class="line"></span><br><span class="line"> sh-nop                             sh-resources                       </span><br><span class="line"> sh-resource                        sh-mod-parms                       </span><br><span class="line"> sh-dev                             sh-udev                            </span><br><span class="line"> sh-minor                           sh-ll-dev                          </span><br><span class="line"> sh-md-dev                          sh-md-idx                          </span><br><span class="line"> sh-ip                              sh-lr-of                           </span><br><span class="line"> sh-b-pri                           sh-status                          </span><br><span class="line"> proxy-up                           proxy-down                         </span><br><span class="line"> new-resource                       </span><br><span class="line"></span><br><span class="line">These commands are used by the kernel part of DRBD to   # drbd内核</span><br><span class="line">invoke user mode helper programs:</span><br><span class="line"></span><br><span class="line"> before-resync-target               after-resync-target                </span><br><span class="line"> before-resync-source               pri-on-incon-degr                  </span><br><span class="line"> pri-lost-after-sb                  fence-peer                         </span><br><span class="line"> local-io-error                     pri-lost                           </span><br><span class="line"> initial-split-brain                split-brain                        </span><br><span class="line"> out-of-sync                        </span><br><span class="line"></span><br><span class="line">These commands ought to be used by experts and developers:  # 开发人员</span><br><span class="line"></span><br><span class="line"> sh-new-minor                       new-minor                          </span><br><span class="line"> suspend-io                         resume-io                          </span><br><span class="line"> set-gi                             new-current-uuid                   </span><br><span class="line"> check-resize</span><br></pre></td></tr></table></figure>
<h1 id="drbddisk-8"><a href="#drbddisk-8" class="headerlink" title="drbddisk.8"></a>drbddisk.8</h1><p>TODO</p>
<h1 id="drbdsetup-8-配置内核模块"><a href="#drbdsetup-8-配置内核模块" class="headerlink" title="drbdsetup.8-配置内核模块"></a>drbdsetup.8-配置内核模块</h1><p>TODO</p>
<h1 id="版本信息"><a href="#版本信息" class="headerlink" title="版本信息"></a>版本信息</h1><p>本文档针对DRBD发行版本8.4.0进行了修订。</p>
<h1 id="作者"><a href="#作者" class="headerlink" title="作者"></a>作者</h1><p>由Philipp Reisner <a href="mailto:&#x70;&#104;&#105;&#x6c;&#105;&#x70;&#x70;&#x2e;&#114;&#101;&#105;&#x73;&#x6e;&#101;&#x72;&#x40;&#x6c;&#x69;&#x6e;&#x62;&#105;&#116;&#46;&#x63;&#x6f;&#x6d;" target="_blank" rel="noopener">&#x70;&#104;&#105;&#x6c;&#105;&#x70;&#x70;&#x2e;&#114;&#101;&#105;&#x73;&#x6e;&#101;&#x72;&#x40;&#x6c;&#x69;&#x6e;&#x62;&#105;&#116;&#46;&#x63;&#x6f;&#x6d;</a>和Lars Ellenberg撰写<a href="mailto:&#108;&#97;&#114;&#115;&#x2e;&#101;&#108;&#108;&#x65;&#110;&#98;&#x65;&#x72;&#x67;&#x40;&#x6c;&#x69;&#110;&#98;&#x69;&#x74;&#46;&#99;&#x6f;&#109;" target="_blank" rel="noopener">&#108;&#97;&#114;&#115;&#x2e;&#101;&#108;&#108;&#x65;&#110;&#98;&#x65;&#x72;&#x67;&#x40;&#x6c;&#x69;&#110;&#98;&#x69;&#x74;&#46;&#99;&#x6f;&#109;</a>。中译版由<code>imoyao</code>首发于别院牧志（<code>idealyard</code>）</p>
<h1 id="报告错误"><a href="#报告错误" class="headerlink" title="报告错误"></a>报告错误</h1><p>将错误报告给<a href="mailto:&#x64;&#114;&#x62;&#x64;&#x2d;&#x75;&#115;&#101;&#x72;&#x40;&#108;&#x69;&#x73;&#x74;&#115;&#x2e;&#x6c;&#x69;&#x6e;&#x62;&#105;&#116;&#46;&#99;&#111;&#109;" target="_blank" rel="noopener">&#x64;&#114;&#x62;&#x64;&#x2d;&#x75;&#115;&#101;&#x72;&#x40;&#108;&#x69;&#x73;&#x74;&#115;&#x2e;&#x6c;&#x69;&#x6e;&#x62;&#105;&#116;&#46;&#99;&#111;&#109;</a>。</p>
<h1 id="版权"><a href="#版权" class="headerlink" title="版权"></a>版权</h1><p>版权所有2001-2011 LINBIT信息技术公司，Philipp Reisner，Lars Ellenberg。 这是免费软件; 请参阅复制条件的来源。 没有保修; 甚至不适用于适销性或针对特定用途的适用性。</p>
<h1 id="推荐阅读"><a href="#推荐阅读" class="headerlink" title="推荐阅读"></a>推荐阅读</h1><p>drbd.conf （5）， drbd （8）， drbddisk （8）， drbdsetup （8）， drbdmeta （8）和DRBD项目网站 [1]</p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ul>
<li><a href="https://docs.linbit.com/man/v84/" target="_blank" rel="noopener">DRBD 8.4 Manual Pages</a></li>
</ul>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/categories/">分类</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#drbd-conf-配置文件"><span class="toc-number">1.</span> <span class="toc-text">drbd.conf-配置文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#drbdmeata-元数据"><span class="toc-number">2.</span> <span class="toc-text">drbdmeata-元数据</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#drbd"><span class="toc-number">3.</span> <span class="toc-text">drbd</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#drbdadm-管理工具"><span class="toc-number">4.</span> <span class="toc-text">drbdadm-管理工具</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#名称"><span class="toc-number">4.1.</span> <span class="toc-text">名称</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#概要"><span class="toc-number">4.2.</span> <span class="toc-text">概要</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#描述"><span class="toc-number">4.3.</span> <span class="toc-text">描述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#选项"><span class="toc-number">4.4.</span> <span class="toc-text">选项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#命令"><span class="toc-number">4.5.</span> <span class="toc-text">命令</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#drbddisk-8"><span class="toc-number">5.</span> <span class="toc-text">drbddisk.8</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#drbdsetup-8-配置内核模块"><span class="toc-number">6.</span> <span class="toc-text">drbdsetup.8-配置内核模块</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#版本信息"><span class="toc-number">7.</span> <span class="toc-text">版本信息</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#作者"><span class="toc-number">8.</span> <span class="toc-text">作者</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#报告错误"><span class="toc-number">9.</span> <span class="toc-text">报告错误</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#版权"><span class="toc-number">10.</span> <span class="toc-text">版权</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#推荐阅读"><span class="toc-number">11.</span> <span class="toc-text">推荐阅读</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#参考链接"><span class="toc-number">12.</span> <span class="toc-text">参考链接</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://imoyao.github.io/blog/2018-06-22/commonds-of-drbd/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://imoyao.github.io/blog/2018-06-22/commonds-of-drbd/&text=DRBD用户手册之命令篇"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://imoyao.github.io/blog/2018-06-22/commonds-of-drbd/&title=DRBD用户手册之命令篇"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://imoyao.github.io/blog/2018-06-22/commonds-of-drbd/&is_video=false&description=DRBD用户手册之命令篇"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=DRBD用户手册之命令篇&body=Check out this article: https://imoyao.github.io/blog/2018-06-22/commonds-of-drbd/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://imoyao.github.io/blog/2018-06-22/commonds-of-drbd/&title=DRBD用户手册之命令篇"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://imoyao.github.io/blog/2018-06-22/commonds-of-drbd/&title=DRBD用户手册之命令篇"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://imoyao.github.io/blog/2018-06-22/commonds-of-drbd/&title=DRBD用户手册之命令篇"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://imoyao.github.io/blog/2018-06-22/commonds-of-drbd/&title=DRBD用户手册之命令篇"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://imoyao.github.io/blog/2018-06-22/commonds-of-drbd/&name=DRBD用户手册之命令篇&description=&lt;p&gt;本文基于&lt;code&gt;DRBD-8.4&lt;/code&gt;版编写。&lt;br&gt;"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2017 - 2019 IMOYAO
    Theme by <a href="https://github.com/probberechts/hexo-theme-cactus">Cactus</a>.
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/categories/">分类</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

    <!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


</body>
</html>
